!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t||self).Swup=e()}(this,function(){const s=new WeakMap;function d(t,e,n,o){if(t||s.has(e)){const i=s.get(e)??new WeakMap,r=(s.set(e,i),i.get(n)??new Set);i.set(n,r);e=r.has(o);return t?r.add(o):r.delete(o),e&&t}}function l(t,e){void 0===e&&(e={}),t=(t=void 0===t?null:t)||u({hash:!0}),e={...window.history.state||{},url:t,random:Math.random(),source:"swup",...e},window.history.replaceState(e,"",t)}const h=(t,e)=>String(t).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||e||"",u=function(t){t=(void 0===t?{}:t).hash;return window.location.pathname+window.location.search+(t?window.location.hash:"")},e=(t,e,n,o)=>{const i=new AbortController;return function(n,o,i,t){const{signal:e,base:r=document}=t;if(e?.aborted)return;const{once:s,...a}=t,c=r instanceof Document?r.documentElement:r,l=Boolean("object"==typeof t?t.capture:t),h=t=>{var e=function(t,e){let n=t.target;if((n=n instanceof Text?n.parentElement:n)instanceof Element&&t.currentTarget instanceof Element){e=n.closest(e);if(e&&t.currentTarget.contains(e))return e}}(t,String(n));if(e){const n=Object.assign(t,{delegateTarget:e});i.call(c,n),s&&(c.removeEventListener(o,h,a),d(!1,c,i,u))}},u=JSON.stringify({selector:n,type:o,capture:l});d(!0,c,i,u)||c.addEventListener(o,h,a),e?.addEventListener("abort",()=>{d(!1,c,i,u)})}(t,e,n,o={...o,signal:i.signal}),{destroy:()=>i.abort()}};class f extends URL{constructor(t,e){void 0===e&&(e=document.baseURI),super(t.toString(),e),Object.setPrototypeOf(this,f.prototype)}get url(){return this.pathname+this.search}static fromElement(t){t=t.getAttribute("href")||t.getAttribute("xlink:href")||"";return new f(t)}static fromUrl(t){return new f(t)}}function n(r,s){void 0===s&&(s={});try{const a=this;function t(t){const{status:n,url:o}=i;return Promise.resolve(i.text()).then(function(t){if(500===n)throw a.hooks.call("fetch:error",c,{status:n,response:i,url:o}),new m("Server error: "+o,{status:n,url:o});if(!t)throw new m("Empty response: "+o,{status:n,url:o});var e=f.fromUrl(o)["url"],t={url:e,html:t};return!c.cache.write||s.method&&"GET"!==s.method||r!==e||a.cache.set(t.url,t),t})}r=f.fromUrl(r).url;const{visit:c=a.visit}=s,o={...a.options.requestHeaders,...s.headers},l=s.timeout??a.options.timeout,h=new AbortController,u=h["signal"];s={...s,headers:o,signal:u};let i,e=!1,n=null;l&&0<l&&(n=setTimeout(()=>{e=!0,h.abort("timeout")},l));const d=function(e){try{var t=Promise.resolve(a.hooks.call("fetch:request",c,{url:r,options:s},(t,e)=>{var{url:e,options:n}=e;return fetch(e,n)})).then(function(t){i=t,n&&clearTimeout(n)})}catch(t){return e(t)}return t&&t.then?t.then(void 0,e):t}(function(t){if(e)throw a.hooks.call("fetch:timeout",c,{url:r}),new m("Request timed out: "+r,{url:r,timedOut:e});if("AbortError"===t?.name||u.aborted)throw new m("Request aborted: "+r,{url:r,aborted:!0});throw t});return Promise.resolve(d&&d.then?d.then(t):t())}catch(t){return Promise.reject(t)}}class m extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}class o{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){const n=new Map;return this.pages.forEach((t,e)=>{n.set(e,{...t})}),n}has(t){return this.pages.has(this.resolve(t))}get(t){t=this.pages.get(this.resolve(t));return t&&{...t}}set(t,e){t=this.resolve(t),e={...e,url:t},this.pages.set(t,e),this.swup.hooks.callSync("cache:set",void 0,{page:e})}update(t,e){t=this.resolve(t);e={...this.get(t),...e,url:t};this.pages.set(t,e)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(n){this.pages.forEach((t,e)=>{n(e,t)&&this.delete(e)})}resolve(t){t=f.fromUrl(t).url;return this.swup.resolveUrl(t)}}function r(t,e){return(e=void 0===e?document:e).querySelector(t)}function a(t,e){return void 0===e&&(e=document),Array.from(e.querySelectorAll(t))}const c=()=>new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})});function v(t){return t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function p(t,e){const n=t?.closest(`[${e}]`);return n?.hasAttribute(e)?n?.getAttribute(e)||!0:void 0}class i{constructor(t){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=t}get selectors(){var t=this.swup.visit.animation["scope"];return"containers"===t?this.swup.visit.containers:"html"===t?["html"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?a(this.selector):[]}add(){this.targets.forEach(t=>t.classList.add(...[].slice.call(arguments)))}remove(){this.targets.forEach(t=>t.classList.remove(...[].slice.call(arguments)))}clear(){this.targets.forEach(t=>{var e=t.className.split(" ").filter(t=>this.isSwupClass(t));t.classList.remove(...e)})}isSwupClass(e){return this.swupClasses.some(t=>e.startsWith(t))}}class g{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0,this.meta=void 0;var{to:e,from:n,hash:o,el:i,event:r}=e;this.id=Math.random(),this.state=1,this.from={url:n??t.location.url,hash:t.location.hash},this.to={url:e,hash:o},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:i,event:r},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0},this.meta={}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return 7<=this.state}}function w(t){return new g(this,t)}const y="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function k(t,e,n){if(!t.s){if(n instanceof P){if(!n.s)return void(n.o=k.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)n.then(k.bind(null,t,e),k.bind(null,t,2));else{t.s=e,t.v=n;const o=t.o;o&&o(t)}}}const P=function(){function e(){}return e.prototype.then=function(n,o){const i=new e,t=this.s;if(t){const e=1&t?n:o;if(e){try{k(i,1,e(this.v))}catch(t){k(i,2,t)}return i}return this}return this.o=function(t){try{var e=t.v;1&t.s?k(i,1,n?n(e):e):o?k(i,1,o(e)):k(i,2,e)}catch(t){k(i,2,t)}},i},e}();function b(t){return t instanceof P&&1&t.s}class S{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){var e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,e,n){void 0===n&&(n={});const o=this.get(t);if(!o)return console.warn(`Hook '${t}' not found.`),()=>{};var i=o.size+1,n={...n,id:i,hook:t,handler:e};return o.set(e,n),()=>this.off(t,e)}before(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,before:!0})}replace(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,replace:!0})}once(t,e,n){return this.on(t,e,{...n=void 0===n?{}:n,once:!0})}off(t,e){const n=this.get(t);n&&e?n.delete(e)||console.warn(`Handler for hook '${t}' not found.`):n&&n.clear()}call(n,t,e,o){try{const i=this,[r,s,a]=i.parseCallArgs(n,t,e,o),{before:c,handler:l,after:h}=i.getHandlers(n,a);return Promise.resolve(i.run(c,r,s)).then(function(){return Promise.resolve(i.run(l,r,s,!0)).then(function(t){let[e]=t;return Promise.resolve(i.run(h,r,s)).then(function(){return i.dispatchDomEvent(n,r,s),e})})})}catch(n){return Promise.reject(n)}}callSync(t,e,n,o){var[e,n,o]=this.parseCallArgs(t,e,n,o),{before:o,handler:i,after:r}=this.getHandlers(t,o),[o]=(this.runSync(o,e,n),this.runSync(i,e,n,!0));return this.runSync(r,e,n),this.dispatchDomEvent(t,e,n),o}parseCallArgs(t,e,n,o){return e instanceof g||"object"!=typeof e&&"function"!=typeof n?[e,n,o]:[void 0,e,n]}run(t,l,h,u){void 0===u&&(u=!1);try{let e;const d=this,f=(void 0===l&&(l=d.swup.visit),[]),n=function(t,n,o){if("function"==typeof t[y]){var i,r,s,a=t[y]();if(function t(e){try{for(;!((i=a.next()).done||o&&o());)if((e=n(i.value))&&e.then){if(!b(e))return void e.then(t,s=s||k.bind(null,r=new P,2));e=e.v}r?k(r,1,e):r=e}catch(t){k(r=r||new P,2,t)}}(),a.return){function e(t){try{i.done||a.return()}catch(t){}return t}if(r&&r.then)return r.then(e,function(t){throw e(t)});e()}return r}if(!("length"in t))throw new TypeError("Object is not iterable");for(var c,l,h,u,d,f=[],m=0;m<t.length;m++)f.push(t[m]);return c=f,l=o,d=-1,function t(e){try{for(;++d<c.length&&(!l||!l());)if((e=n(f[d]))&&e.then){if(!b(e))return void e.then(t,u=u||k.bind(null,h=new P,2));e=e.v}h?k(h,1,e):h=e}catch(t){k(h=h||new P,2,t)}}(),h}(t,function(t){let{hook:e,handler:n,defaultHandler:o,once:i}=t;if(!l?.done){i&&d.off(e,n);function r(t){if(u)throw t;console.error(`Error in hook '${e}':`,t)}var s,a;try{var c=Promise.resolve((s=n,void 0===(a=[l,h,o])&&(a=[]),new Promise((t,e)=>{const n=s(...a);v(n)?n.then(t,e):t(n)}))).then(function(t){f.push(t)})}catch(t){return r(t)}return c&&c.then?c.then(void 0,r):c}},function(){return e});return Promise.resolve(n&&n.then?n.then(function(t){return e,f}):(e,f))}catch(t){return Promise.reject(t)}}runSync(t,e,n,o){void 0===e&&(e=this.swup.visit),void 0===o&&(o=!1);const i=[];for(var{hook:r,handler:s,defaultHandler:a,once:c}of t)if(!e?.done){c&&this.off(r,s);try{const t=s(e,n,a);i.push(t),v(t)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${r}'.`)}catch(t){if(o)throw t;console.error(`Error in hook '${r}':`,t)}}return i}getHandlers(t,e){const n=this.get(t);if(!n)return{found:!1,before:[],handler:[],after:[],replaced:!1};const o=Array.from(n.values()),i=this.sortRegistrations,r=o.filter(t=>{var{before:t,replace:e}=t;return t&&!e}).sort(i),s=o.filter(t=>{t=t.replace;return t}).filter(t=>!0).sort(i),a=o.filter(t=>{var{before:t,replace:e}=t;return!t&&!e}).sort(i),c=0<s.length;let l=[];if(e&&(l=[{id:0,hook:t,handler:e}],c)){const n=s.length-1,{handler:o,once:i}=s[n],r=n=>{const o=s[n-1];return o?(t,e)=>o.handler(t,e,r(n-1)):e};l=[{id:0,hook:t,once:i,handler:o,defaultHandler:r(n)}]}return{found:!0,before:r,handler:l,after:a,replaced:c}}sortRegistrations(t,e){return(t.priority??0)-(e.priority??0)||t.id-e.id||0}dispatchDomEvent(t,e,n){e?.done||(n={hook:t,args:n,visit:e||this.swup.visit},document.dispatchEvent(new CustomEvent("swup:any",{detail:n,bubbles:!0})),document.dispatchEvent(new CustomEvent("swup:"+t,{detail:n,bubbles:!0})))}parseName(t){const[e,...n]=t.split(".");return[e,n.reduce((t,e)=>({...t,[e]:!0}),{})]}}function E(t){var{selector:e,elements:n}=t;try{if(!1===e&&!n)return Promise.resolve();let t=[];if(n)t=Array.from(n);else if(e&&!(t=a(e,document.body)).length)return console.warn(`[swup] No elements found matching animationSelector \`${e}\``),Promise.resolve();const o=t.map(t=>{{var s=t,e,n,o,i;t=window.getComputedStyle(s),e=A(t,U+"Delay"),n=A(t,U+"Duration"),e=H(e,n),o=A(t,x+"Delay"),t=A(t,x+"Duration"),o=H(o,t),i=Math.max(e,o);const{type:a,timeout:c,propCount:l}={type:o=0<i?o<e?U:x:null,timeout:i,propCount:o?(o===U?n:t).length:0};return!(!a||!c)&&new Promise(t=>{const e=a+"end",n=performance.now();let o=0;const i=()=>{s.removeEventListener(e,r),t()},r=t=>{t.target!==s||(performance.now()-n)/1e3<t.elapsedTime||++o>=l&&i()};setTimeout(()=>{o<l&&i()},c+1),s.addEventListener(e,r)})}});return 0<o.filter(Boolean).length?Promise.resolve(Promise.all(o)).then(function(){}):(e&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${e}\``),Promise.resolve())}catch(t){return Promise.reject(t)}}const C=t=>{if(!(t=t&&"#"===t.charAt(0)?t.substring(1):t))return null;var e=decodeURIComponent(t);let n=document.getElementById(t)||document.getElementById(e)||r(`a[name='${CSS.escape(t)}']`)||r(`a[name='${CSS.escape(e)}']`);return n=n||"top"!==t?n:document.body},U="transition",x="animation";function A(t,e){return(t[e]||"").split(", ")}function H(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((t,e)=>j(t)+j(n[e])))}function j(t){return 1e3*parseFloat(t)}function T(s,a){void 0===a&&(a={});try{let i;const c=this;function t(t){if(i)return t;c.navigating=!0;function e(t,e){if(delete s.to.document,t)throw e;return e}var t=(c.visit=s).trigger["el"],n=(a.referrer=a.referrer||c.location.url,!1===a.animate&&(s.animation.animate=!1),s.animation.animate||c.classes.clear(),a.history||p(t,"data-swup-history")),n=("string"==typeof n&&["push","replace"].includes(n)&&(s.history.action=n),a.animation||p(t,"data-swup-animation"));"string"==typeof n&&(s.animation.name=n),s.meta=a.meta||{},"object"==typeof a.cache?(s.cache.read=a.cache.read??s.cache.read,s.cache.write=a.cache.write??s.cache.write):void 0!==a.cache&&(s.cache={read:!!a.cache,write:!!a.cache}),delete a.cache;try{var o=function(e){try{var t=Promise.resolve(c.hooks.call("visit:start",s,void 0)).then(function(){function t(){if(!s.done)return Promise.resolve(c.hooks.call("visit:transition",s,void 0,function(){try{let n;function t(t){return n?t:(s.advance(4),Promise.resolve(c.animatePageOut(s)).then(function(){function t(){return Promise.resolve(c.animatePageIn(s)).then(function(){})}const e=function(){if(s.animation.native&&document.startViewTransition)return Promise.resolve(document.startViewTransition(function(){try{const e=c.renderPage;return Promise.resolve(o).then(function(t){return Promise.resolve(e.call(c,s,t))})}catch(t){return Promise.reject(t)}}).finished).then(function(){});{const e=c.renderPage;return Promise.resolve(o).then(function(t){return Promise.resolve(e.call(c,s,t)).then(function(){})})}}();return e&&e.then?e.then(t):t()}))}const e=function(){if(!s.animation.animate)return Promise.resolve(c.hooks.call("animation:skip",void 0)).then(function(){const e=c.renderPage;return Promise.resolve(o).then(function(t){return Promise.resolve(e.call(c,s,t)).then(function(){n=1})})})}();return Promise.resolve(e&&e.then?e.then(t):t(e))}catch(t){return Promise.reject(t)}})).then(function(){if(!s.done)return Promise.resolve(c.hooks.call("visit:end",s,void 0,()=>c.classes.clear())).then(function(){s.state=7,c.navigating=!1,c.onVisitEnd&&(c.onVisitEnd(),c.onVisitEnd=void 0)})})}s.state=3;const o=c.hooks.call("page:load",s,{options:a},function(t,n){try{function o(t){return n.page=t,n.cache=!!e,n.page}let e;return t.cache.read&&(e=c.cache.get(t.to.url)),Promise.resolve(e?o(e):Promise.resolve(c.fetchPage(t.to.url,n.options)).then(o))}catch(t){return Promise.reject(t)}});o.then(t=>{t=t.html;s.advance(5),s.to.html=t,s.to.document=(new DOMParser).parseFromString(t,"text/html")});var e=s.to.url+s.to.hash;{var n,i;s.history.popstate||("replace"===s.history.action||s.to.url===c.location.url?l(e):(c.currentHistoryIndex++,n=e,void 0===(i={index:c.currentHistoryIndex})&&(i={}),i={url:n=n||u({hash:!0}),random:Math.random(),source:"swup",...i},window.history.pushState(i,"",n)))}c.location=f.fromUrl(e),s.history.popstate&&c.classes.add("is-popstate"),s.animation.name&&c.classes.add("to-"+h(s.animation.name));const r=function(){if(s.animation.wait)return Promise.resolve(o).then(function(){})}();return r&&r.then?r.then(t):t()})}catch(t){return e(t)}return t&&t.then?t.then(void 0,e):t}(function(t){t&&!t?.aborted?(s.state=9,console.error(t),c.options.skipPopStateHandling=()=>(window.location.assign(s.to.url+s.to.hash),!0),window.history.back()):s.state=8})}catch(t){return e(!0,t)}return o&&o.then?o.then(e.bind(null,!1),e.bind(null,!0)):e(!1,o)}const e=function(){if(c.navigating)return 6<=c.visit.state?(s.state=2,c.onVisitEnd=()=>c.performNavigation(s,a),void(i=1)):Promise.resolve(c.hooks.call("visit:abort",c.visit,void 0)).then(function(){delete c.visit.to.document,c.visit.state=8})}();return Promise.resolve(e&&e.then?e.then(t):t(e))}catch(t){return Promise.reject(t)}}function L(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),"string"!=typeof t)throw new Error("swup.navigate() requires a URL parameter");var o;this.shouldIgnoreVisit(t,{el:n.el,event:n.event})?window.location.assign(t):({url:t,hash:o}=f.fromUrl(t),n=this.createVisit({...n,to:t,hash:o}),this.performNavigation(n,e))}function V(t){try{const n=this;return Promise.resolve(n.hooks.call("animation:out:start",t,void 0,()=>{n.classes.add("is-changing","is-animating","is-leaving")})).then(function(){return Promise.resolve(n.hooks.call("animation:out:await",t,{skip:!1},(t,e)=>{e=e.skip;if(!e)return n.awaitAnimations({selector:t.animation.selector})})).then(function(){return Promise.resolve(n.hooks.call("animation:out:end",t,void 0)).then(function(){})})})}catch(t){return Promise.reject(t)}}function I(t){const o=t.to.document;if(!o)return!1;var e=o.querySelector("title")?.innerText||"";document.title=e;const n=a('[data-swup-persist]:not([data-swup-persist=""])'),i=t.containers.map(t=>{const e=document.querySelector(t),n=o.querySelector(t);return e&&n?(e.replaceWith(n.cloneNode(!0)),!0):(e||console.warn("[swup] Container missing in current document: "+t),n||console.warn("[swup] Container missing in incoming document: "+t),!1)}).filter(Boolean);return n.forEach(t=>{const e=t.getAttribute("data-swup-persist"),n=r(`[data-swup-persist="${e}"]`);n&&n!==t&&n.replaceWith(t)}),i.length===t.containers.length}function q(t){var e={behavior:"auto"},{target:n,reset:o}=t.scroll,n=n??t.to.hash;let i=!1;return n&&(i=this.hooks.callSync("scroll:anchor",t,{hash:n,options:e},(t,e)=>{var{hash:e,options:n}=e;const o=this.getAnchorElement(e);return o&&o.scrollIntoView(n),!!o})),i=o&&!i?this.hooks.callSync("scroll:top",t,{options:e},(t,e)=>{e=e.options;return window.scrollTo({top:0,left:0,...e}),!0}):i}function N(t){try{const n=this;if(t.done)return Promise.resolve();const e=n.hooks.call("animation:in:await",t,{skip:!1},(t,e)=>{e=e.skip;if(!e)return n.awaitAnimations({selector:t.animation.selector})});return Promise.resolve(c()).then(function(){return Promise.resolve(n.hooks.call("animation:in:start",t,void 0,()=>{n.classes.remove("is-animating")})).then(function(){return Promise.resolve(e).then(function(){return Promise.resolve(n.hooks.call("animation:in:end",t,void 0)).then(function(){})})})})}catch(t){return Promise.reject(t)}}function R(t,e){try{const o=this;if(t.done)return Promise.resolve();t.advance(6);var n=e["url"];return o.isSameResolvedUrl(u(),n)||(l(n),o.location=f.fromUrl(n),t.to.url=o.location.url,t.to.hash=o.location.hash),Promise.resolve(o.hooks.call("content:replace",t,{page:e},(t,e)=>{if(o.classes.remove("is-leaving"),t.animation.animate&&o.classes.add("is-rendering"),!o.replaceContent(t))throw new Error("[swup] Container mismatch, aborting");t.animation.animate&&(o.classes.add("is-changing","is-animating","is-rendering"),t.animation.name&&o.classes.add("to-"+h(t.animation.name)))})).then(function(){return Promise.resolve(o.hooks.call("content:scroll",t,void 0,()=>o.scrollToContent(t))).then(function(){return Promise.resolve(o.hooks.call("page:view",t,{url:o.location.url,title:document.title})).then(function(){})})})}catch(t){return Promise.reject(t)}}function O(t){if(Boolean(t?.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error("Not a swup plugin instance",t)}function D(t){const e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(t=>t!==e),this.plugins;console.error("No such plugin",e)}function M(e){return this.plugins.find(t=>t===e||t.name===e||t.name==="Swup"+String(e))}function $(t){if("function"!=typeof this.options.resolveUrl)return console.warn("[swup] options.resolveUrl expects a callback function."),t;const e=this.options.resolveUrl(t);return e&&"string"==typeof e?e.startsWith("//")||e.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),t):e:(console.warn("[swup] options.resolveUrl needs to return a url"),t)}function W(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}const B={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],hooks:{},ignoreVisit:function(t,e){let n=(void 0===e?{}:e)["el"];return!!n?.closest("[data-no-swup]")},linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:t=>"swup"!==t.state?.source,timeout:0};return class{get currentPageUrl(){return this.location.url}constructor(t){void 0===t&&(t={}),this.version="4.8.2",this.options=void 0,this.defaults=B,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=f.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=O,this.unuse=D,this.findPlugin=M,this.log=()=>{},this.navigate=L,this.performNavigation=T,this.createVisit=w,this.delegateEvent=e,this.fetchPage=n,this.awaitAnimations=E,this.renderPage=R,this.replaceContent=I,this.animatePageIn=N,this.animatePageOut=V,this.scrollToContent=q,this.getAnchorElement=C,this.getCurrentUrl=u,this.resolveUrl=$,this.isSameResolvedUrl=W,this.options={...this.defaults,...t},this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new o(this),this.classes=new i(this),this.hooks=new S(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=window.history.state?.index??1,this.enable()}enable(){try{const n=this,o=n.options["linkSelector"];n.clickDelegate=n.delegateEvent(o,"click",n.handleLinkClick),window.addEventListener("popstate",n.handlePopState),n.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),n.options.native=n.options.native&&!!document.startViewTransition,n.options.plugins.forEach(t=>n.use(t));for(var[t,e]of Object.entries(n.options.hooks)){const[i,l]=n.hooks.parseName(t);n.hooks.on(i,e,l)}return"swup"!==window.history.state?.source&&l(null,{index:n.currentHistoryIndex}),Promise.resolve(c()).then(function(){return Promise.resolve(n.hooks.call("enable",void 0,void 0,()=>{const t=document.documentElement;t.classList.add("swup-enabled"),t.classList.toggle("swup-native",n.options.native)})).then(function(){})})}catch(t){return Promise.reject(t)}}destroy(){try{const e=this;return e.clickDelegate.destroy(),window.removeEventListener("popstate",e.handlePopState),e.cache.clear(),e.options.plugins.forEach(t=>e.unuse(t)),Promise.resolve(e.hooks.call("disable",void 0,void 0,()=>{const t=document.documentElement;t.classList.remove("swup-enabled"),t.classList.remove("swup-native")})).then(function(){e.hooks.clear()})}catch(t){return Promise.reject(t)}}shouldIgnoreVisit(t,e){var{el:e,event:n}=void 0===e?{}:e,{origin:t,url:o,hash:i}=f.fromUrl(t);return t!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(o+i,{el:e,event:n})}handleLinkClick(e){const t=e.delegateTarget,{href:n,url:o,hash:i}=f.fromElement(t);if(!this.shouldIgnoreVisit(n,{el:t,event:e}))if(this.navigating&&o===this.visit.to.url)e.preventDefault();else{const r=this.createVisit({to:o,hash:i,el:t,event:e});e.metaKey||e.ctrlKey||e.shiftKey||e.altKey?this.hooks.callSync("link:newtab",r,{href:n}):0===e.button&&this.hooks.callSync("link:click",r,{el:t,event:e},()=>{var t=r.from.url??"";e.preventDefault(),o&&o!==t?this.isSameResolvedUrl(o,t)||this.performNavigation(r):i?this.hooks.callSync("link:anchor",r,{hash:i},()=>{l(o+i),this.scrollToContent(r)}):this.hooks.callSync("link:self",r,void 0,()=>{"navigate"===this.options.linkToSelf?this.performNavigation(r):(l(o),this.scrollToContent(r))})})}}handlePopState(t){var e=t.state?.url??window.location.href;if(!this.options.skipPopStateHandling(t)&&!this.isSameResolvedUrl(u(),this.location.url)){const{url:n,hash:o}=f.fromUrl(e),i=this.createVisit({to:n,hash:o,event:t});i.history.popstate=!0;e=t.state?.index??0;e&&e!==this.currentHistoryIndex&&(i.history.direction=0<e-this.currentHistoryIndex?"forwards":"backwards",this.currentHistoryIndex=e),i.animation.animate=!1,i.scroll.reset=!1,i.scroll.target=!1,this.options.animateHistoryBrowsing&&(i.animation.animate=!0,i.scroll.reset=!0),this.hooks.callSync("history:popstate",i,{event:t},()=>{this.performNavigation(i)})}}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}});
