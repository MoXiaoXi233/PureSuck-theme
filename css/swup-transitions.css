/**
 * ============================================
 * PureSuck Swup 4 过渡动画系统
 * ============================================
 *
 * 卡片式出现效果：从下方优雅浮现
 */

/* ========== 列表页动画 ========== */

/* 离开列表页：快速淡出 */
.transition-list-out [data-swup-animation] {
    animation: cardSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* 进入列表页：卡片浮现 */
.transition-list-in [data-swup-animation] {
    opacity: 0;
    transform: translateY(40px) scale(0.96);
    animation: cardSlideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* 卡片交错延迟，依次出现 */
.transition-list-in .post:nth-child(1) { animation-delay: 0ms; }
.transition-list-in .post:nth-child(2) { animation-delay: 60ms; }
.transition-list-in .post:nth-child(3) { animation-delay: 120ms; }
.transition-list-in .post:nth-child(4) { animation-delay: 180ms; }
.transition-list-in .post:nth-child(5) { animation-delay: 240ms; }
.transition-list-in .post:nth-child(6) { animation-delay: 300ms; }
.transition-list-in .post:nth-child(n+7) { animation-delay: 360ms; }

/* ========== 文章页动画 ========== */

/* 离开文章页：快速淡出 */
.transition-post-out [data-swup-animation] {
    animation: fadeOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* 进入文章页：内容浮现 */
.transition-post-in [data-swup-animation] {
    opacity: 0;
    transform: translateY(30px);
    animation: contentSlideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* ========== 关键帧动画 ========== */

@keyframes cardSlideOut {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-15px) scale(0.98);
    }
}

@keyframes cardSlideIn {
    0% {
        opacity: 0;
        transform: translateY(40px) scale(0.96);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes contentSlideIn {
    0% {
        opacity: 0;
        transform: translateY(30px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========== 过渡状态 ========== */

html.is-animating #swup {
    pointer-events: none;
}

/* ========== 性能优化 ========== */

[data-swup-animation] {
    will-change: opacity, transform;
    backface-visibility: hidden;
}

/* ========== 减少动画偏好 ========== */

@media (prefers-reduced-motion: reduce) {
    .transition-list-out [data-swup-animation],
    .transition-list-in [data-swup-animation],
    .transition-post-out [data-swup-animation],
    .transition-post-in [data-swup-animation] {
        animation: none !important;
        opacity: 1 !important;
        transform: none !important;
        transition: opacity 0.2s ease;
    }
}
